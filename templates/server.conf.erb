<%#
This file is part of the doubledog-sigul Puppet module.
Copyright 2016-2021 John Florian
SPDX-License-Identifier: GPL-3.0-or-later
-%>
# This file is managed by Puppet via the "<%= @module_name %>" module.
#
# vim: filetype=configparser

# This is a configuration for the Sigul Server.

[server]
# Host name of the publicly accessible bridge to clients
bridge-hostname: <%= @bridge_hostname %>
# Port on which the bridge expects server connections
bridge-port: <%= @bridge_port %>
# Maximum accepted size of payload stored on disk
max-file-payload-size: <%= @max_file_payload_size %>
# Maximum accepted size of payload stored in server's memory
max-memory-payload-size: <%= @max_memory_payload_size %>
# Maximum accepted total size of all RPM payloads stored on disk for one request
max-rpms-payload-size: <%= @max_rpms_payload_size %>
# Nickname of the server's certificate in the NSS database specified below
server-cert-nickname: <%= @server_cert_nickname %>
# Maximum number of seconds to wait for signing one package
signing-timeout: <%= @signing_timeout %>
# Whether to relax the CN vs user name check
lenient-username-check: <%= @lenient_username_check %>
# Which CN's are allowed to use different user names
<% if @proxy_usernames -%>
proxy-usernames: <%= @proxy_usernames.flatten.join(',') %>
<% else -%>
; proxy-usernames:
<% end -%>

[database]
# Path to a SQLite database
database-path: <%= @database_path %>

[gnupg]
# Path to a directory containing GPG configuration and key rings
gnupg-home: <%= @gnupg_home %>
# Default primary key type for newly created keys
gnupg-key-type: <%= @gnupg_key_type %>
# Default primary key length for newly created keys
gnupg-key-length: <%= @gnupg_key_length %>
# Default subkey type for newly created keys, empty for no subkey
gnupg-subkey-type: <%= @gnupg_subkey_type %>
# Default subkey length for newly created keys if gnupg-subkey-type is not empty
; gnupg-subkey-length: 2048
# Default key usage flags for newly created keys
; gnupg-key-usage: sign
# Length of key passphrases used for newly created keys
; passphrase-length: 64

[daemon]
# The user to run as
unix-user: sigul
# The group to run as
unix-group: sigul

[nss]
# Path to a directory containing a NSS database
; nss-dir: @localstatedir@/lib/sigul
# Password for accessing the NSS database.  If not specified, the server will
# ask on startup
nss-password: <%= @nss_password %>
